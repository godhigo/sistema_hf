<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Empleados</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

{% include 'sidebar.html' %}

<div class="main-content">
    <div class="container-empleados">
        <h1 class="title-empleados">Empleados</h1>

        <div class="empleados-grid">
            {% for e in empleados %}
            <div class="empleado-card">

                <img src="{{ url_for('static', filename='uploads/' ~ e.foto) }}" class="empleado-foto" alt="{{ e.nombre }}">

                <h3>{{ e.nombre }}</h3>
                <p><strong>Email:</strong> {{ e.email }}</p>
                <p><strong>Teléfono:</strong> {{ e.telefono }}</p>
                <p><strong>Especialidad:</strong> {{ e.especialidad }}</p>
                
                <!-- BOTÓN EDITAR -->
                <button type="button" onclick="toggleEditForm('{{ e.id }}')">✏️</button>

                <!-- FORMULARIO OCULTO -->
                <div id="edit-form-{{ e.id }}" class="edit-form" style="display:none; margin-top:10px; border:1px solid #ccc; padding:10px; border-radius:8px;">
                    <form action="/actualizar_empleado" method="POST" enctype="multipart/form-data">
                        <input type="hidden" name="id" value="{{ e.id }}">
                        <label>Nombre:</label>
                        <input type="text" name="nombre" value="{{ e.nombre }}" required>
                        <label>Email:</label>
                        <input type="email" name="email" value="{{ e.email }}" required>
                        <label>Teléfono:</label>
                        <input type="text" name="telefono" value="{{ e.telefono }}" required>
                        <label>Especialidad:</label>
                        <input type="text" name="especialidad" value="{{ e.especialidad }}" required>
                        <label>Foto:</label>
                        <input type="file" name="foto">
                        <button type="submit">Guardar</button>
                    </form>
                </div>

            </div>
            {% endfor %}
        </div>
    </div>
</div>

<script>
function toggleEditForm(id) {
    const form = document.getElementById('edit-form-' + id);
    if (form.style.display === 'none') {
        form.style.display = 'block';
    } else {
        form.style.display = 'none';
    }
}
</script>

</body>
</html>
